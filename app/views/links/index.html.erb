<% @hash.map do |date, links| %>
  <div class="well date_color"> 
    <div class="back_link"><%= date %></div>
    <% links.each do |link| %>
      <div class="link row clearfix">
        <h2>
          <%= link_to link.title, link.url, class: "link_color"  %><br>
          <small>Submitted <%= time_ago_in_words(link.created_at) %> by <%= link.user.name %></small>
        </h2>

        <% if current_user %>
          <div class="btn-group">
            <%= link_to like_link_path(link), method: :get, remote: true, class: "btn btn-default btn-sm like_link_#{link.id} heart" do %>
              <span class="fa-stack fa-1x heart_jump">
                <i class="fa fa-heart fa-stack-1x"></i>
              </span>
              Like
              <span class="likes_count_<%=link.id%>">
                <%= link.get_upvotes.size %>
              </span>
            <% end %>
            <%= link_to dislike_link_path(link), method: :get, remote: true, class: "btn btn-default btn-sm unlike_link_#{link.id}" do %>
              <span class="fa-stack fa-1x">
                <i class="fa fa-heart fa-stack-1x"></i>
                <i class="fa fa-bolt fa-stack-1x fa-inverse"></i>
              </span>
              Dislike
              <span class="unlikes_count_<%=link.id%>">
                <%= link.get_downvotes.size %>   
              </span>     
            <% end %>
          </div>
          <% if link.user == current_user %>
            <div class="btn-group">
              <%= link_to edit_link_path(link), class: "btn btn-default btn-sm" do %>
                  <span class="fa-stack fa-1x">
                    <i class="fa fa-pencil fa-stack-1x"></i>
                  </span>
                  Edit
              <% end %>
              <%= link_to link, method: :delete, data: { confirm: 'Are you sure you want to delete?' }, class: "btn btn-default btn-sm" do %>
                  <span class="fa-stack fa-1x">
                    <i class="fa fa-trash fa-stack-1x"></i>
                  </span>
                  Delete
              <% end %>
            </div>
          <% end %>
          <% else %>
            <div class="btn-group">
              <%= link_to like_link_path(link), method: :put, disabled: true, class: "btn btn-default btn-sm" do %>
                <span class="fa-stack fa-1x">
                  <i class="fa fa-heart fa-stack-1x"></i>
                </span>
                Like
                <%= link.get_upvotes.size %>
              <% end %>
              <%= link_to dislike_link_path(link), method: :put, disabled: true, class: "btn btn-default btn-sm" do %>
                <span class="fa-stack fa-1x">
                  <i class="fa fa-heart fa-stack-1x"></i>
                  <i class="fa fa-bolt fa-stack-1x fa-inverse"></i>
                </span>
                Dislike
                <%= link.get_downvotes.size %>        
              <% end %>
            </div>
          <% end %>
      </div>
    <% end %>
  </div>
<% end %>


<script type="text/javascript">
  $( ".heart" ).click(function() {
    $(this).children(".heart_jump").animateCss('wobble');
  });
</script>>